---
title: "1. Creating a Swig"
description: "\"A journey of a thousand steps starts with one Swig.\" - Somebody"
---

Before we begin our quest lets make sure you have the basics ready so lets set up a basic project, if you have already done this, feel free to move on. If you have not finished step 0 in this tutorial please go back and run through that as we refer back and depend on this step.

Now that you have your environment all setup and ready to role, make a new file called `tutorial.ts`, make sure you are in the `examples/classic/transfer` folder for the `classic` version and `examples/kit/transfer` folder for `kit`. Don't forget to start your validator with `bun start-validator`

  ```bash 
  mkdir tutorial && touch tutorial-1.ts 
  ```

Open that file up in your favorite editor, or AI overlord super virtual reality goggles. Lets make a function called `createSwigAccount`

## Example

<Tabs>
  <Tab title="Classic">
```typescript
import {
  Keypair,
  LAMPORTS_PER_SOL,
  Connection,
} from '@solana/web3.js';

import {
  Actions,
  createSwig,
  Ed25519Authority,
  findSwigPda
} from "@swig-wallet/classic";

import chalk from 'chalk';

async function createSwigAccount(
  connection: Connection,
  user: Keypair,
) {
  try {
    const id = new Uint8Array(32);
    crypto.getRandomValues(id);
    const [swigAddress] = findSwigPda(id);
    const rootAuthority = Ed25519Authority.fromPublicKey(user.publicKey);
    const rootActions = Actions.set().manageAuthority().get();
    const tx = await createSwig(
      connection,
      id,
      rootAuthority,
      rootActions,
      user.publicKey,
      [user]
    );

    console.log(chalk.green("‚úì Swig account created at:"), chalk.cyan(swigAddress.toBase58()));
    return swigAddress;
  } catch (error) {
    console.error(chalk.red("‚úó Error creating Swig account:"), chalk.red(error));
    throw error;
  }
}

(async () => {
  console.log(chalk.blue("üöÄ Starting tutorial"));
  const connection = new Connection('http://localhost:8899', 'confirmed');
  const userKeypair = Keypair.generate();
  let f = await connection.requestAirdrop(userKeypair.publicKey, 100 * LAMPORTS_PER_SOL);
  let blockhash = await connection.getLatestBlockhash();
  await connection.confirmTransaction({
    signature: f,
    blockhash: blockhash.blockhash,
    lastValidBlockHeight: blockhash.lastValidBlockHeight,
  })
  console.log(chalk.green("üë§ User public key:"), chalk.cyan(userKeypair.publicKey.toBase58()));
  let swigAddress = await createSwigAccount(connection, userKeypair);
  await setTimeout(() => {
    console.log(chalk.green("\n‚ú® Everything looks good!"));
    console.log(chalk.yellow("üîç Check out your transaction on Solana Explorer:"));
    console.log(chalk.cyan(`https://explorer.solana.com/address/${swigAddress.toBase58()}?cluster=custom&customUrl=http%3A%2F%2Flocalhost%3A8899`));
  }, 2000);
})();
```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Lets save this and get ready to run it, but before we do lets break it down step by step.

## 1. Import Required SDKs

<Tabs>
  <Tab title="Classic">
    ```typescript
    import { Connection, PublicKey, LAMPORTS_PER_SOL } from "@solana/web3.js";
    import { 
      Actions, 
      createSwig, 
      Ed25519Authority, 
      findSwigPda 
    } from "@swig-wallet/classic";
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Imports Solana primitives and essential utilities from the Swig SDK.

## 2. Generate a Unique Swig ID

<Tabs>
  <Tab title="Classic">
    ```typescript
    //in the create swig function
    const id = new Uint8Array(32);
    crypto.getRandomValues(id);
    ```

  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Generates a secure 32-byte ID that uniquely identifies this Swig wallet instance. This ID is used to derive the PDA (Program Derived Address).

> üí° This can really be anything, as long as it's globally unique. You can even use other public keys, strings, or a boring old number if needed.

## 3. Derive the Swig PDA

<Tabs>
  <Tab title="Classic">
    ```typescript
      const [swigAddress] = findSwigPda(id);
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Computes the wallet's on-chain PDA using the generated ID. This is the unique address of the Swig account on Solana.

> üß† This is a standard Solana pattern‚ÄîSwig just makes it easier.

## 4. Create the Root Role

Swig is role-based: it combines Authorities (who) and Actions (what) to determine permissions. This section builds the root role.

<Tabs>
  <Tab title="Classic">
    ```typescript
      const rootAuthority = Ed25519Authority.fromPublicKey(user.publicKey);
      const rootActions = Actions.set().manageAuthority().get();
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

This sets up the root role. Since this is the root, it must have at least `manageAuthority()` or `all()`.

> ‚úÖ `manageAuthority()` is restrictive but safe.
>
> üö® `all()` gives full control‚Äîuse carefully in production.

You can find all available action types in the [Swig SDK docs](https://anagrambuild.github.io/swig-ts/enums/_swig-wallet_coder.Permission.html). New types may be added over time.

Swig supports multiple Authority types‚Äîthis example uses `Ed25519Authority`, but others are available for different credentials or verification methods. These handle the Authentication half of Swig's model. You can find all the types of authorities on the [SDK Docs](https://anagrambuild.github.io/swig-ts/enums/_swig-wallet_coder.AuthorityType.html).

## 5. Create the Swig Account On-Chain

<Tabs>
  <Tab title="Classic">
    ```typescript
      const tx = await createSwig(
        connection,
        id,
        rootAuthority,
        rootActions,
        user.publicKey,
        [user]
      );
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
     ```
  </Tab>
</Tabs>

Creates the Swig account by sending a transaction to the Solana blockchain. The transaction must be signed by the user. In this case the payer of the transaction and the rent is the user, but you can also have a different fee payer for transaction for an example see this.

## 6. Simulate a Funded User

<Tabs>
  <Tab title="Classic">
    ```typescript
      const userKeypair = Keypair.generate();
      let f = await connection.requestAirdrop(userKeypair.publicKey, 100 * LAMPORTS_PER_SOL);
      let blockhash = await connection.getLatestBlockhash();
      await connection.confirmTransaction({
        signature: f,
        blockhash: blockhash.blockhash,
        lastValidBlockHeight: blockhash.lastValidBlockHeight,
      });
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Creates a fresh Keypair and airdrops some SOL from the local validator so it can pay for the transaction.

## 7. Connect to the Validator

<Tabs>
  <Tab title="Classic">
    ```typescript 
      const connection = new Connection('http://localhost:8899', 'confirmed');
    ```
  </Tab>
    <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Creates a connection to the local Solana cluster. Ensure you've run:

<Tabs>
  <Tab title="Classic">
   ```bash
      //in the transfer folder
      bun start-validator
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

This spins up a local testnet with the Swig programs deployed.

## 8. Log Success

<Tabs>
  <Tab title="Classic">
    ```typescript
    console.log(chalk.green("‚úì Swig account created at:"), chalk.cyan(swigAddress.toBase58()));
    ```
  </Tab>
  <Tab title="Kit">
    ```typescript
    // kit version coming soon
    ```
  </Tab>
</Tabs>

Prints the address of the new Swig account in a colorized format.

## Ready to run it?

  ```bash
bun run ./tutorial/tutorial-1.ts
```

Congratulations on your first Swig!
